const m=$('meta[name="csrf_token"]').attr("content"),a=$('meta[name="base_url"]').attr("content"),f=a+"/instructor/courses/create",l=a+"/instructor/courses/update";var c=new Notyf({duration:5e3,dismissible:!0}),d=`
<div class="modal-content text-center p-3" style="display:inline">
    <div class="spinner-border" role="status">
        <span class="visually-hidden">Loading...</span>
    </div>
</div>
`;$(".course-tab").on("click",function(e){e.preventDefault();let o=$(this).data("step");$(".course-form").find("input[name=next_step]").val(o),$(".course-form").trigger("submit")});$(".basic_info_form").on("submit",function(e){e.preventDefault();let o=new FormData(this);$.ajax({method:"POST",url:f,data:o,contentType:!1,processData:!1,beforeSend:function(){},success:function(t){t.status=="success"&&(window.location.href=t.redirect)},error:function(t,n,r){console.log(t);let s=t.responseJSON.errors;$.each(s,function(u,i){c.error(i[0])})},complete:function(){}})});$(".basic_info_update_form").on("submit",function(e){e.preventDefault();let o=new FormData(this);$.ajax({method:"POST",url:l,data:o,contentType:!1,processData:!1,beforeSend:function(){},success:function(t){t.status=="success"&&(window.location.href=t.redirect)},error:function(t,n,r){let s=t.responseJSON.errors;$.each(s,function(u,i){c.error(i[0])})},complete:function(){}})});$(".more_info_form").on("submit",function(e){e.preventDefault();let o=new FormData(this);$.ajax({method:"POST",url:l,data:o,contentType:!1,processData:!1,beforeSend:function(){},success:function(t){t.status=="success"&&(window.location.href=t.redirect)},error:function(t,n,r){let s=t.responseJSON.errors;$.each(s,function(u,i){c.error(i[0])})},complete:function(){}})});$(document).ready(function(){$(document).on("change",".storage",function(){let e=$(this).val();$(".source_input").val(""),console.log("working"),e=="upload"?($(".upload_source").removeClass("d-none"),$(".external_source").addClass("d-none")):($(".upload_source").addClass("d-none"),$(".external_source").removeClass("d-none"))})});$(".dynamic-modal-btn").on("click",function(e){e.preventDefault(),$("#dynamic-modal").modal("show");let o=$(this).data("id");$.ajax({method:"GET",url:a+"/instructor/course-content/:id/create-chapter".replace(":id",o),data:{},beforeSend:function(){$(".dynamic-modal-content").html(d)},success:function(t){$(".dynamic-modal-content").html(t)},error:function(t,n,r){}})});$(".edit_chapter").on("click",function(e){e.preventDefault(),$("#dynamic-modal").modal("show");let o=$(this).data("chapter-id");$.ajax({method:"GET",url:a+"/instructor/course-content/:id/edit-chapter".replace(":id",o),data:{},beforeSend:function(){$(".dynamic-modal-content").html(d)},success:function(t){$(".dynamic-modal-content").html(t)},error:function(t,n,r){}})});$(".add_lesson").on("click",function(){$("#dynamic-modal").modal("show");let e=$(this).data("course-id"),o=$(this).data("chapter-id");$.ajax({method:"GET",url:a+"/instructor/course-content/create-lesson",data:{course_id:e,chapter_id:o},beforeSend:function(){$(".dynamic-modal-content").html(d)},success:function(t){$(".dynamic-modal-content").html(t)},error:function(t,n,r){}})});$(".edit_lesson").on("click",function(){$("#dynamic-modal").modal("show");let e=$(this).data("course-id"),o=$(this).data("chapter-id"),t=$(this).data("lesson-id");$.ajax({method:"GET",url:a+"/instructor/course-content/edit-lesson",data:{course_id:e,chapter_id:o,lesson_id:t},beforeSend:function(){$(".dynamic-modal-content").html(d)},success:function(n){$(".dynamic-modal-content").html(n)},error:function(n,r,s){}})});$(".sortable_list li").length&&$(".sortable_list").sortable({items:"li",containment:"parent",cursor:"move",handle:".dragger",update:function(e,o){let t=$(this).sortable("toArray",{attribute:"data-lesson-id"}),n=o.item.data("chapter-id");$.ajax({method:"POST",url:a+`/instructor/course-chapter/${n}/sort-lesson`,data:{_token:m,order_ids:t},success:function(r){c.success(r.message)},error:function(r,s,u){c.error(data.error)}})}});$(".sort_chapter_btn").on("click",function(){$("#dynamic-modal").modal("show");let e=$(this).data("id");$.ajax({method:"GET",url:a+`/instructor/course-content/${e}/sort-chapter`,data:{},beforeSend:function(){$(".dynamic-modal-content").html(d)},success:function(o){$(".dynamic-modal-content").html(o)},error:function(o,t,n){c.error(n)}})});
