import{$ as e}from"./jquery-T8mbjkVg.js";window.$=window.jQuery=e;const f=e('meta[name="csrf_token"]').attr("content"),s=e('meta[name="base_url"]').attr("content"),h=s+"/admin/courses/create",m=s+"/admin/courses/update";var i=new Notyf({duration:5e3,dismissible:!0}),u=`
<div class="modal-content text-center p-3" style="display:inline">
    <div class="spinner-border" role="status">
        <span class="visually-hidden">Loading...</span>
    </div>
</div>
`;function p(o,n){console.log("working"),e.ajax({method:"PUT",url:s+`/admin/courses/${o}/update-approval`,data:{_token:f,status:n},success:function(t){window.location.reload()},error:function(t,a,r){}})}e(function(){e(".update-approval-status").on("change",function(){let o=e(this).data("id"),n=e(this).val();p(o,n)}),e(".course-tab").on("click",function(o){o.preventDefault();let n=e(this).data("step");e(".course-form").find("input[name=next_step]").val(n),e(".course-form").trigger("submit")}),e(".basic_info_form").on("submit",function(o){o.preventDefault();let n=new FormData(this);e.ajax({method:"POST",url:h,data:n,contentType:!1,processData:!1,beforeSend:function(){},success:function(t){t.status=="success"&&(window.location.href=t.redirect)},error:function(t,a,r){console.log(t);let c=t.responseJSON.errors;e.each(c,function(l,d){i.error(d[0])})},complete:function(){}})}),e(".basic_info_update_form").on("submit",function(o){o.preventDefault();let n=new FormData(this);e.ajax({method:"POST",url:m,data:n,contentType:!1,processData:!1,beforeSend:function(){},success:function(t){t.status=="success"&&(window.location.href=t.redirect)},error:function(t,a,r){let c=t.responseJSON.errors;e.each(c,function(l,d){i.error(d[0])})},complete:function(){}})}),e(".more_info_form").on("submit",function(o){o.preventDefault();let n=new FormData(this);e.ajax({method:"POST",url:m,data:n,contentType:!1,processData:!1,beforeSend:function(){},success:function(t){t.status=="success"&&(window.location.href=t.redirect)},error:function(t,a,r){let c=t.responseJSON.errors;e.each(c,function(l,d){i.error(d[0])})},complete:function(){}})}),e(document).on("change",".storage",function(){let o=e(this).val();e(".source_input").val(""),console.log("working"),o=="upload"?(e(".upload_source").removeClass("d-none"),e(".external_source").addClass("d-none")):(e(".upload_source").addClass("d-none"),e(".external_source").removeClass("d-none"))}),e(".dynamic-modal-btn").on("click",function(o){o.preventDefault(),e("#dynamic-modal").modal("show");let n=e(this).data("id");e.ajax({method:"GET",url:s+"/admin/course-content/:id/create-chapter".replace(":id",n),data:{},beforeSend:function(){e(".dynamic-modal-content").html(u)},success:function(t){e(".dynamic-modal-content").html(t)},error:function(t,a,r){}})}),e(".edit_chapter").on("click",function(o){o.preventDefault(),e("#dynamic-modal").modal("show");let n=e(this).data("chapter-id");e.ajax({method:"GET",url:s+"/admin/course-content/:id/edit-chapter".replace(":id",n),data:{},beforeSend:function(){e(".dynamic-modal-content").html(u)},success:function(t){e(".dynamic-modal-content").html(t)},error:function(t,a,r){}})}),e(".add_lesson").on("click",function(){e("#dynamic-modal").modal("show");let o=e(this).data("course-id"),n=e(this).data("chapter-id");e.ajax({method:"GET",url:s+"/admin/course-content/create-lesson",data:{course_id:o,chapter_id:n},beforeSend:function(){e(".dynamic-modal-content").html(u)},success:function(t){e(".dynamic-modal-content").html(t)},error:function(t,a,r){}})}),e(".edit_lesson").on("click",function(){e("#dynamic-modal").modal("show");let o=e(this).data("course-id"),n=e(this).data("chapter-id"),t=e(this).data("lesson-id");e.ajax({method:"GET",url:s+"/admin/course-content/edit-lesson",data:{course_id:o,chapter_id:n,lesson_id:t},beforeSend:function(){e(".dynamic-modal-content").html(u)},success:function(a){e(".dynamic-modal-content").html(a)},error:function(a,r,c){}})}),e(".sortable_list li").length&&e(".sortable_list").sortable({items:"li",containment:"parent",cursor:"move",handle:".dragger",update:function(o,n){let t=e(this).sortable("toArray",{attribute:"data-lesson-id"}),a=n.item.data("chapter-id");e.ajax({method:"POST",url:s+`/admin/course-chapter/${a}/sort-lesson`,data:{_token:f,order_ids:t},success:function(r){i.success(r.message)},error:function(r,c,l){i.error(data.error)}})}}),e(".sort_chapter_btn").on("click",function(){e("#dynamic-modal").modal("show");let o=e(this).data("id");e.ajax({method:"GET",url:s+`/admin/course-content/${o}/sort-chapter`,data:{},beforeSend:function(){e(".dynamic-modal-content").html(u)},success:function(n){e(".dynamic-modal-content").html(n)},error:function(n,t,a){i.error(a)}})})});
