const n=$('meta[name="csrf_token"]').attr("content"),r=$('meta[name="base_url"]').attr("content");var l=new Notyf({duration:5e3,dismissible:!0});function d(s,e,o,t){if(e=="youtube")return`<video id="vid1" class="video-js vjs-default-skin" controls autoplay width="640" height="264"
                data-setup='{ "techOrder": ["youtube"], "sources": [{ "type": "video/youtube", "src": "${o}"}] }'>
            </video>`;if(e=="vimeo")return`<video id="vid1" class="video-js" width="640" height="264"
                data-setup='{ "techOrder": ["vimeo"], "sources": [{ "type": "video/vimeo", "src": "${o}"}], "vimeo": { "color": "#fbc51b"} }'>
              </video> `;if(e=="upload"||e=="external_link"){if(t=="doc"){c(o);return}else if(t=="file")return`    <div class="file_type">
            <div class="file_type_inner">
                    <div><img src="${r}/default-files/folder.png" alt=""></div>
                    <h6 class="mt-2">Type: File</h6>
                    ${e=="external_link"?`<a href="${o}" target="_blank" class="common_btn mt-3">Download</a>`:`<a href="${r}/student/file-download/${s}" class="common_btn mt-3">Download</a>`}
                    
            </div>
        </div>`;return`<iframe src="${o}" width="640" height="264" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>`}}async function c(s){const e=await fetch(s);if(!e.ok)throw new Error(`Error: ${e.status}`);const o=await e.blob();docx.renderAsync(o,document.getElementsByClassName("video_holder")[0]).then(t=>console.log("docx: finished"))}function u(s,e,o){$.ajax({method:"POST",url:`${r}/student/update-watch-history`,data:{_token:n,chapter_id:e,lesson_id:o,course_id:s},beforeSend:function(){},success:function(t){},error:function(t,i,a){}})}$(".lesson").on("click",function(){$(".lesson").removeClass("active"),$(this).addClass("active");let s=$(this).data("chapter-id"),e=$(this).data("lesson-id"),o=$(this).data("course-id");$.ajax({method:"GET",url:`${r}/student/get-lesson-content`,data:{chapter_id:s,lesson_id:e,course_id:o},beforeSend:function(){$(".about_lecture").text("Loading...")},success:function(t){$(".video_holder").html(d(t.id,t.storage,t.file_path,t.file_type)),$(".about_lecture").text(t.description),videojs.getPlayers().vid1&&videojs.getPlayers().vid1.dispose(),$("#vid1").length>0&&videojs("vid1").ready(function(){this.play()}),u(o,s,e)},error:function(t,i,a){}})});$(".make_completed").on("click",function(){let s=$(this).data("chapter-id"),e=$(this).data("lesson-id"),o=$(this).data("course-id");$.ajax({method:"POST",url:`${r}/student/update-lesson-completion`,data:{_token:n,chapter_id:s,lesson_id:e,course_id:o},beforeSend:function(){},success:function(t){l.success(t.message)},error:function(t,i,a){}})});
